<?xml version="1.0" encoding="UTF-8" ?>
<?xml-stylesheet href="styl.css" type="text/css" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="pl">
<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/prism.min.js"></script>
 <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, viewport-fit=cover">
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="keywords" content="personal page, fyqer">
 <meta name="author" content="Daniel Gałeczka">
<title>Fyqer_blog</title>
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/themes/prism.min.css"
/>
<link rel="stylesheet" type="text/css" href="styl.css" />
<link rel="stylesheet" href="styl.css">

</head>
<body>
<div id="yah"></a></div>
<div id="menu">
<h2 id="luk">Menu</h2>
<a href="index.html" class="link">/index</a> </br>
<a href="index.html" class="link">/thm_writeups</a>
<a href="index.html" class="link">/ctf_writeups</a>
<a href="index.html" class="link">/other_writeups</a>
<a href="About_author.html" class="link">/About_author</a>

<p id="copy">&copy; copyright by ... Daniel Gałeczka</p></div>

<div class = "x"> 
						░░░░██╗░█████╗░██╗░░░░░░█████╗░██╗░░░██╗██████╗░░██████╗███████╗██████╗░██╗░░░██╗██╗░█████╗░███████╗
							░░░██╔╝██╔══██╗██║░░░░░██╔══██╗██║░░░██║██╔══██╗██╔════╝██╔════╝██╔══██╗██║░░░██║██║██╔══██╗██╔════╝
							░░██╔╝░██║░░╚═╝██║░░░░░██║░░██║██║░░░██║██║░░██║╚█████╗░█████╗░░██████╔╝╚██╗░██╔╝██║██║░░╚═╝█████╗░░
							░██╔╝░░██║░░██╗██║░░░░░██║░░██║██║░░░██║██║░░██║░╚═══██╗██╔══╝░░██╔══██╗░╚████╔╝░██║██║░░██╗██╔══╝░░
							██╔╝░░░╚█████╔╝███████╗╚█████╔╝╚██████╔╝██████╔╝██████╔╝███████╗██║░░██║░░╚██╔╝░░██║╚█████╔╝███████╗
							╚═╝░░░░░╚════╝░╚══════╝░╚════╝░░╚═════╝░╚═════╝░╚═════╝░╚══════╝╚═╝░░╚═╝░░░╚═╝░░░╚═╝░╚════╝░╚══════╝
</div>
<div class="content">
</br>
</br>
</br>
</br></br>
</br></br>
</br>
<a href="https://cloudservice.pleasehackthis.site/">
    <div class="link">
         <p>Link to the challenge</p>
		 
			
    </div>
</a>

<p>

When we visit this page, the login form is presented, without checking source code i checked basic sql vulnability, this one worked:</p>
<pre><code class="language-x">"admin" OR "1"="1";-- a</pre>
<p>After that easy query the flag showed up</p>

<img src="walkth/cloudservice.jpg" width="450" height="250">
<p> Additionally if we look at source code, we can try to make webserver ignore the part of the hash symbol by sending '#' as login: </p>


<pre><code class="language-css">
$message = 'Welcome! Please provide your credentials!';

if(isset($_REQUEST['login']) && isset($_REQUEST['password']))
{	
	/* Login attempt */
	if($_SERVER['SERVER_NAME'] == 'cloudservice' && $_SERVER['REMOTE_ADDR'] == '127.0.0.1')
	{
		/* Request from internal network */
		require("../internal_secrets.php");
		if($_REQUEST['login'] == $secret_login && $_REQUEST['password'] == $secret_password)
			exit('OK!');
		else
			exit('FAIL!');
		
	}
	else
	{
		/* Request from the Internet. Redirect to cloud service.*/
		$result = file_get_contents("http://cloudservice/?login={$_REQUEST['login']}&password={$_REQUEST['password']}");
		if($result === 'FAIL!')
		{
			$message = 'You have failed miserably.';
		}
		else
		{
			$message = require('flag.php');
		}
	}
}


</pre>

</div>

</body>
</html>
